version: '3'
name: react-web-portal
services:
  frontend:
    stdin_open: true
    tty: true
    build:
      context: .
      dockerfile: Dockerfile
      target: local
    command: sh -c "npm run all:dev"
    image: starter-all-portals
    container_name: starter-all-portals
    volumes:
      - '.:/app'
      - '/app/node_modules'
      - "/app/apps/invox/node_modules"
      - "/app/packages/shared/node_modules"
    ports: 
      - '3000:3000'
    environment:
      HOST: "0.0.0.0"
      VITE__INVOX_PORTAL_DEV_PORT: 3000
    extra_hosts:
      - 'host.docker.internal:host-gateway'